\hypertarget{decoderInterface_8h}{}\doxysection{src/decoder\+Interface/decoder\+Interface.h File Reference}
\label{decoderInterface_8h}\index{src/decoderInterface/decoderInterface.h@{src/decoderInterface/decoderInterface.h}}


Header Files for the decoder Interface.  


{\ttfamily \#include $<$fcntl.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$sys/ioctl.\+h$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include \char`\"{}./../helpers/helpers.\+h\char`\"{}}\newline
{\ttfamily \#include $<$linux/spi/spidev.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{decoderInterface_8h_a677a5a2cb49ba023b28f16a3c0d38b0e}\label{decoderInterface_8h_a677a5a2cb49ba023b28f16a3c0d38b0e}} 
\#define {\bfseries S\+P\+I\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+P\+E\+ED}~10000
\item 
\mbox{\Hypertarget{decoderInterface_8h_af859a98f57110e5243e8f0541319e43b}\label{decoderInterface_8h_af859a98f57110e5243e8f0541319e43b}} 
\#define {\bfseries B\+I\+T\+S\+\_\+\+P\+E\+R\+\_\+\+W\+O\+RD}~8
\item 
\mbox{\Hypertarget{decoderInterface_8h_ac8551bdc3d8c10962b07b67d9558c6c8}\label{decoderInterface_8h_ac8551bdc3d8c10962b07b67d9558c6c8}} 
\#define \mbox{\hyperlink{decoderInterface_8h_ac8551bdc3d8c10962b07b67d9558c6c8}{N\+Q\+U\+AD}}~0x00
\begin{DoxyCompactList}\small\item\em Tokens Para Codificacao de Contagem de Quadratura. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_a56cb489ea18306c755ca95aaab835749}\label{decoderInterface_8h_a56cb489ea18306c755ca95aaab835749}} 
\#define {\bfseries Q\+U\+A\+D\+R\+X1}~0x01
\item 
\mbox{\Hypertarget{decoderInterface_8h_adde947448a8b0e8ed4232e6645adff17}\label{decoderInterface_8h_adde947448a8b0e8ed4232e6645adff17}} 
\#define {\bfseries Q\+U\+A\+D\+R\+X2}~0x02
\item 
\mbox{\Hypertarget{decoderInterface_8h_af409c8fda3b8fee55811fb024cb030a6}\label{decoderInterface_8h_af409c8fda3b8fee55811fb024cb030a6}} 
\#define {\bfseries Q\+U\+A\+D\+R\+X4}~0x03
\item 
\mbox{\Hypertarget{decoderInterface_8h_a0a9f6fa936390e8bdc58e536b95d9c29}\label{decoderInterface_8h_a0a9f6fa936390e8bdc58e536b95d9c29}} 
\#define \mbox{\hyperlink{decoderInterface_8h_a0a9f6fa936390e8bdc58e536b95d9c29}{F\+R\+E\+E\+\_\+\+R\+UN}}~0x00
\begin{DoxyCompactList}\small\item\em Tokens de Modo de Contagem. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_a4087c0b793e4b5dcfdb9692f9dcf7dcc}\label{decoderInterface_8h_a4087c0b793e4b5dcfdb9692f9dcf7dcc}} 
\#define {\bfseries S\+I\+N\+G\+E\+\_\+\+C\+Y\+C\+LE}~0x04
\item 
\mbox{\Hypertarget{decoderInterface_8h_a31b7e33ba45b07c841ef2988515626c2}\label{decoderInterface_8h_a31b7e33ba45b07c841ef2988515626c2}} 
\#define {\bfseries R\+A\+N\+G\+E\+\_\+\+L\+I\+M\+IT}~0x08
\item 
\mbox{\Hypertarget{decoderInterface_8h_a286add63c87c46d697b3b0c326194d4d}\label{decoderInterface_8h_a286add63c87c46d697b3b0c326194d4d}} 
\#define {\bfseries M\+O\+D\+U\+L\+O\+\_\+N}~0x0C
\item 
\mbox{\Hypertarget{decoderInterface_8h_a9c85cd3313959f783e982dc29f5894b4}\label{decoderInterface_8h_a9c85cd3313959f783e982dc29f5894b4}} 
\#define \mbox{\hyperlink{decoderInterface_8h_a9c85cd3313959f783e982dc29f5894b4}{D\+I\+S\+A\+B\+L\+E\+\_\+\+I\+N\+DX}}~0x00
\begin{DoxyCompactList}\small\item\em Tokens de Pino de Indice. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_afccb4adb9d1d983a0168c7b2ad479be0}\label{decoderInterface_8h_afccb4adb9d1d983a0168c7b2ad479be0}} 
\#define {\bfseries I\+N\+D\+X\+\_\+\+L\+O\+A\+DC}~0x10
\item 
\mbox{\Hypertarget{decoderInterface_8h_ae4061c5a38091947401e476906f0414d}\label{decoderInterface_8h_ae4061c5a38091947401e476906f0414d}} 
\#define {\bfseries I\+N\+D\+X\+\_\+\+R\+E\+S\+E\+TC}~0x20
\item 
\mbox{\Hypertarget{decoderInterface_8h_a58ef749dca421662ecb45a087081e14d}\label{decoderInterface_8h_a58ef749dca421662ecb45a087081e14d}} 
\#define {\bfseries I\+N\+D\+X\+\_\+\+L\+O\+A\+DO}~0x30
\item 
\mbox{\Hypertarget{decoderInterface_8h_a862a841a15a8df2ec3fe318054577a65}\label{decoderInterface_8h_a862a841a15a8df2ec3fe318054577a65}} 
\#define {\bfseries A\+S\+Y\+N\+C\+H\+\_\+\+I\+N\+DX}~0x00
\item 
\mbox{\Hypertarget{decoderInterface_8h_a524767a3389b4e228f054dc07cf03eb3}\label{decoderInterface_8h_a524767a3389b4e228f054dc07cf03eb3}} 
\#define {\bfseries S\+Y\+N\+C\+H\+\_\+\+I\+N\+DX}~0x80
\item 
\mbox{\Hypertarget{decoderInterface_8h_ad868c8b55c4dfcc54eae872431d2113e}\label{decoderInterface_8h_ad868c8b55c4dfcc54eae872431d2113e}} 
\#define \mbox{\hyperlink{decoderInterface_8h_ad868c8b55c4dfcc54eae872431d2113e}{F\+I\+L\+T\+E\+R\+\_\+1}}~0x00
\begin{DoxyCompactList}\small\item\em Tokens de Para Frequencia. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_a8a9ff9129a0202b755fa962a1d7a1634}\label{decoderInterface_8h_a8a9ff9129a0202b755fa962a1d7a1634}} 
\#define {\bfseries F\+I\+L\+T\+E\+R\+\_\+2}~0x80
\item 
\mbox{\Hypertarget{decoderInterface_8h_a9cfcd032e38e55938e02821e97fe3660}\label{decoderInterface_8h_a9cfcd032e38e55938e02821e97fe3660}} 
\#define \mbox{\hyperlink{decoderInterface_8h_a9cfcd032e38e55938e02821e97fe3660}{N\+O\+\_\+\+F\+L\+A\+GS}}~0x00
\begin{DoxyCompactList}\small\item\em Tokens para Flags. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_a2ea1a424fdab0c4b7ddf54ff67dad08d}\label{decoderInterface_8h_a2ea1a424fdab0c4b7ddf54ff67dad08d}} 
\#define {\bfseries I\+D\+X\+\_\+\+F\+L\+AG}~0x10
\item 
\mbox{\Hypertarget{decoderInterface_8h_a074368acf74b589c1dbf45c7bad357e5}\label{decoderInterface_8h_a074368acf74b589c1dbf45c7bad357e5}} 
\#define {\bfseries C\+M\+P\+\_\+\+F\+L\+AG}~0x20
\item 
\mbox{\Hypertarget{decoderInterface_8h_ad9ee687e466278fb1d21a107227f5da8}\label{decoderInterface_8h_ad9ee687e466278fb1d21a107227f5da8}} 
\#define {\bfseries B\+W\+\_\+\+F\+L\+AG}~0x40
\item 
\mbox{\Hypertarget{decoderInterface_8h_a9e019b9d20cf7b4072da1a0892c7118a}\label{decoderInterface_8h_a9e019b9d20cf7b4072da1a0892c7118a}} 
\#define {\bfseries C\+Y\+\_\+\+F\+L\+AG}~0x80
\item 
\mbox{\Hypertarget{decoderInterface_8h_a331a010a3845e67f2cb06ba4c51e46f2}\label{decoderInterface_8h_a331a010a3845e67f2cb06ba4c51e46f2}} 
\#define \mbox{\hyperlink{decoderInterface_8h_a331a010a3845e67f2cb06ba4c51e46f2}{B\+Y\+T\+E\+\_\+4}}~0x00
\begin{DoxyCompactList}\small\item\em Tokens Para Largura Contador. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_a8c0001a2776c2f7ad759f43e77e460ca}\label{decoderInterface_8h_a8c0001a2776c2f7ad759f43e77e460ca}} 
\#define {\bfseries B\+Y\+T\+E\+\_\+3}~0x01
\item 
\mbox{\Hypertarget{decoderInterface_8h_a8478fde7b3478e18f57a71255db28c8a}\label{decoderInterface_8h_a8478fde7b3478e18f57a71255db28c8a}} 
\#define {\bfseries B\+Y\+T\+E\+\_\+2}~0x02
\item 
\mbox{\Hypertarget{decoderInterface_8h_ab9a0d70cb746f776adf784200005e0a1}\label{decoderInterface_8h_ab9a0d70cb746f776adf784200005e0a1}} 
\#define {\bfseries B\+Y\+T\+E\+\_\+1}~0x03
\item 
\mbox{\Hypertarget{decoderInterface_8h_a6d53c8a07c6a28b77606d9adac788e1e}\label{decoderInterface_8h_a6d53c8a07c6a28b77606d9adac788e1e}} 
\#define \mbox{\hyperlink{decoderInterface_8h_a6d53c8a07c6a28b77606d9adac788e1e}{E\+N\+\_\+\+C\+N\+TR}}~0x00
\begin{DoxyCompactList}\small\item\em Tokens Para Habilitar Contagem. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_a9491da571d484ba3fc9cd23069f06c17}\label{decoderInterface_8h_a9491da571d484ba3fc9cd23069f06c17}} 
\#define {\bfseries D\+I\+S\+\_\+\+C\+N\+TR}~0x04
\item 
\mbox{\Hypertarget{decoderInterface_8h_aa1401b1c9a0fa1cf60ae9736e3286479}\label{decoderInterface_8h_aa1401b1c9a0fa1cf60ae9736e3286479}} 
\#define \mbox{\hyperlink{decoderInterface_8h_aa1401b1c9a0fa1cf60ae9736e3286479}{C\+L\+R\+\_\+\+M\+D\+R0}}~0x08
\begin{DoxyCompactList}\small\item\em Tokens de Proposito Geral, Read, Zerar, Decoder e Set do Registradores. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_a4a707767ed57e7ad728447294a44edd9}\label{decoderInterface_8h_a4a707767ed57e7ad728447294a44edd9}} 
\#define {\bfseries C\+L\+R\+\_\+\+M\+D\+R1}~0x10
\item 
\mbox{\Hypertarget{decoderInterface_8h_a16c48d94cd722a9b80c88ea5403fe32a}\label{decoderInterface_8h_a16c48d94cd722a9b80c88ea5403fe32a}} 
\#define {\bfseries C\+L\+R\+\_\+\+C\+N\+TR}~0x20
\item 
\mbox{\Hypertarget{decoderInterface_8h_a203152a9c75e948ba94c41b3aeb9a24e}\label{decoderInterface_8h_a203152a9c75e948ba94c41b3aeb9a24e}} 
\#define {\bfseries C\+L\+R\+\_\+\+S\+TR}~0x30
\item 
\mbox{\Hypertarget{decoderInterface_8h_ab3861df87cd42aa72231b09f35be1511}\label{decoderInterface_8h_ab3861df87cd42aa72231b09f35be1511}} 
\#define {\bfseries R\+E\+A\+D\+\_\+\+M\+D\+R0}~0x48
\item 
\mbox{\Hypertarget{decoderInterface_8h_ae85cdc156bb6c019d867e44ec1f985f0}\label{decoderInterface_8h_ae85cdc156bb6c019d867e44ec1f985f0}} 
\#define {\bfseries R\+E\+A\+D\+\_\+\+M\+D\+R1}~0x50
\item 
\mbox{\Hypertarget{decoderInterface_8h_a16f3c4a685121a0c5ae673d5dc51ce79}\label{decoderInterface_8h_a16f3c4a685121a0c5ae673d5dc51ce79}} 
\#define {\bfseries R\+E\+A\+D\+\_\+\+C\+N\+TR}~0x60
\item 
\mbox{\Hypertarget{decoderInterface_8h_a9bd56d0014c148e80f521d6a643c21d9}\label{decoderInterface_8h_a9bd56d0014c148e80f521d6a643c21d9}} 
\#define {\bfseries R\+E\+A\+D\+\_\+\+O\+TR}~0x68
\item 
\mbox{\Hypertarget{decoderInterface_8h_aa398eb881ac21354b754a2a6335f436c}\label{decoderInterface_8h_aa398eb881ac21354b754a2a6335f436c}} 
\#define {\bfseries R\+E\+A\+D\+\_\+\+S\+TR}~0x70
\item 
\mbox{\Hypertarget{decoderInterface_8h_a0698ef7218887ec46cf9b0c54691048b}\label{decoderInterface_8h_a0698ef7218887ec46cf9b0c54691048b}} 
\#define {\bfseries W\+R\+I\+T\+E\+\_\+\+M\+D\+R1}~0x90
\item 
\mbox{\Hypertarget{decoderInterface_8h_a73c9ba0cf0643be60bbb546c7a7afe6e}\label{decoderInterface_8h_a73c9ba0cf0643be60bbb546c7a7afe6e}} 
\#define {\bfseries W\+R\+I\+T\+E\+\_\+\+M\+D\+R0}~0x88
\item 
\mbox{\Hypertarget{decoderInterface_8h_a18e74458eec7be38fd016ae3fa90aa21}\label{decoderInterface_8h_a18e74458eec7be38fd016ae3fa90aa21}} 
\#define {\bfseries W\+R\+I\+T\+E\+\_\+\+D\+TR}~0x98
\item 
\mbox{\Hypertarget{decoderInterface_8h_acaf0f48f32bcf0364ceb6af9fe679811}\label{decoderInterface_8h_acaf0f48f32bcf0364ceb6af9fe679811}} 
\#define {\bfseries L\+O\+A\+D\+\_\+\+C\+N\+TR}~0x\+E0
\item 
\mbox{\Hypertarget{decoderInterface_8h_a3d58f007c5ba589531eeaec7c2328b3f}\label{decoderInterface_8h_a3d58f007c5ba589531eeaec7c2328b3f}} 
\#define {\bfseries L\+O\+A\+D\+\_\+\+O\+TR}~0x\+E4
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{decoderInterface_8h_aa643b06f53912de8c90b619803eb27a6}\label{decoderInterface_8h_aa643b06f53912de8c90b619803eb27a6}} 
void \mbox{\hyperlink{decoderInterface_8h_aa643b06f53912de8c90b619803eb27a6}{decoder\+Initializer}} (int spi\+Speed)
\begin{DoxyCompactList}\small\item\em Initializer The Decoder With Pre Definied Tokens for Handling Couting Funcao para Fazer a Inicializacao dos Tokens Necessarios para Funcionamento do Decoder. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{decoderInterface_8h_af5872793a562a54c455d94fef27f3a2b}{read\+Decoder\+Counter}} ()
\begin{DoxyCompactList}\small\item\em Read Decoder With S\+PI I\+OC T\+R\+A\+N\+S\+F\+ER Funcao para Fazer a Leitura do Decoder e Retornar Valor do Contador Lido. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_a82fe1a26c4a03de6dc52798635d4ca27}\label{decoderInterface_8h_a82fe1a26c4a03de6dc52798635d4ca27}} 
void \mbox{\hyperlink{decoderInterface_8h_a82fe1a26c4a03de6dc52798635d4ca27}{clear\+Decoder}} ()
\begin{DoxyCompactList}\small\item\em Function For Cleaning Decoder Funcao para Zerar o Contador do Decoder. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{decoderInterface_8h_a75971fdf1e347a1d330cae5e15250edf}\label{decoderInterface_8h_a75971fdf1e347a1d330cae5e15250edf}} 
void \mbox{\hyperlink{decoderInterface_8h_a75971fdf1e347a1d330cae5e15250edf}{wrap\+Up\+Decoder}} ()
\begin{DoxyCompactList}\small\item\em Function For Exiting and Restart Variables Of Decoder Funcao para fazer a limpeza das variaveis e setar decoder como nao inicializado. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Header Files for the decoder Interface. 

\begin{DoxyAuthor}{Author}
Rodolfo Viola Carvalho, Gabriel Alexandre Zillmer, Felipe Fuhr Dos Reis 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
11 Dec 2019 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{decoderInterface_8h_af5872793a562a54c455d94fef27f3a2b}\label{decoderInterface_8h_af5872793a562a54c455d94fef27f3a2b}} 
\index{decoderInterface.h@{decoderInterface.h}!readDecoderCounter@{readDecoderCounter}}
\index{readDecoderCounter@{readDecoderCounter}!decoderInterface.h@{decoderInterface.h}}
\doxysubsubsection{\texorpdfstring{readDecoderCounter()}{readDecoderCounter()}}
{\footnotesize\ttfamily int read\+Decoder\+Counter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Read Decoder With S\+PI I\+OC T\+R\+A\+N\+S\+F\+ER Funcao para Fazer a Leitura do Decoder e Retornar Valor do Contador Lido. 

\begin{DoxyReturn}{Returns}
Retorna o Status da Inicializacao Sendo, 1 feita com Sucesso. 
\end{DoxyReturn}


Definition at line 34 of file decoder\+Interface.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{34                         \{}
\DoxyCodeLine{35     \textcolor{keywordflow}{if}(DEBUG) printf(\textcolor{stringliteral}{"[DEBUG] -\/ Starting readDecoderCounter Function \(\backslash\)n"});}
\DoxyCodeLine{36 \textcolor{preprocessor}{\#if IS\_RUNNING\_LOCAL == FALSE}}
\DoxyCodeLine{37     \textcolor{keywordflow}{if}(decoderInitialized == FALSE) \{}
\DoxyCodeLine{38         fprintf(stderr, \textcolor{stringliteral}{"[ERROR] -\/ SPI Device Not Initialized. Cant Read Decoder \(\backslash\)n"});}
\DoxyCodeLine{39         exit(1);}
\DoxyCodeLine{40     \}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     \textcolor{keyword}{struct }spi\_ioc\_transfer message;}
\DoxyCodeLine{43     \textcolor{keywordflow}{if}(DEBUG) printf(\textcolor{stringliteral}{"[DEBUG] -\/ readDecoderCounter Before Setting txBuf and rxBuff \(\backslash\)n"});}
\DoxyCodeLine{44     uint8\_t rxbuf[5] = \{ 0xF0, 0xF1, 0xF2, 0xF3, 0xF4 \};}
\DoxyCodeLine{45     uint8\_t txbuf[5] = \{ READ\_CNTR, 0x00, 0x00, 0x00, 0x00 \};}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{keywordflow}{if}(DEBUG) printf(\textcolor{stringliteral}{"[DEBUG] -\/ readDecoderCounter Setting message \(\backslash\)n"});}
\DoxyCodeLine{48     message.tx\_buf = (\textcolor{keywordtype}{unsigned} long) \&txbuf;}
\DoxyCodeLine{49     message.rx\_buf = (\textcolor{keywordtype}{unsigned} long) \&rxbuf;}
\DoxyCodeLine{50     message.bits\_per\_word = BITS\_PER\_WORD;}
\DoxyCodeLine{51     message.speed\_hz = frequencyRate;}
\DoxyCodeLine{52     message.len = \textcolor{keyword}{sizeof}(txbuf);}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \textcolor{keywordflow}{if}(DEBUG) printf(\textcolor{stringliteral}{"[DEBUG] -\/ readDecoderCounter Before SPI\_IOC\_MESSAGE \(\backslash\)n"});}
\DoxyCodeLine{55     \textcolor{keywordflow}{if}(ioctl(fileDescriptor, SPI\_IOC\_MESSAGE(1), \&message) < 0)\{}
\DoxyCodeLine{56         fprintf(stderr, \textcolor{stringliteral}{"[ERROR] -\/ While Trying to Read SPI Decoder \(\backslash\)n"});}
\DoxyCodeLine{57     \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{keywordflow}{if}(DEBUG) printf(\textcolor{stringliteral}{"[DEBUG] -\/ readDecoderCounter assign rxBuffer \(\backslash\)n"});}
\DoxyCodeLine{60     uint32\_t byte1 = rxbuf[4];}
\DoxyCodeLine{61     uint32\_t byte2 = rxbuf[3] << 8;}
\DoxyCodeLine{62     uint32\_t byte3 = rxbuf[2] << 16;}
\DoxyCodeLine{63     uint32\_t byte4 = rxbuf[1] << 24;}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     uint32\_t readOut = byte1 | byte2 | byte3 | byte4;}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keywordflow}{if}(DEBUG) printf(\textcolor{stringliteral}{"[DEBUG] -\/ readDecoderCounter readOut: \%d \(\backslash\)n"}, readOut);}
\DoxyCodeLine{68     \textcolor{keywordflow}{return} readOut;}
\DoxyCodeLine{69 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{70 \}}

\end{DoxyCode}
